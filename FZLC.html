<html>

<head>
<meta charset="utf-8" />
<title>发展历程</title>
<script src="js/echarts.js"></script>
<script src="js/jquery-2.2.3.min.js"></script>
<style type="text/css">
#echarts {
	/* width: 2000px;
	height: 100px; */
	border: 1px solid #ccc;
	margin: 150px;
	height: 800px;
	margin-top: 400px;
}
.his-sect {
	width: 317px;
	height: 366px;
	float: left;
	font-size: 44px;
	color: #0f1e93;
	text-align: center;
	padding-top: 148px;
	box-sizing: border-box;
	position: relative;
}
.his-sect:nth-child(odd) {
	background: url(img/FZLC-ODD.png);
}
.his-sect:nth-child(even) {
	background: url(img/FZLC-EVEN.png);
}
.his-tip {
	width: 470px;
	font-size: 24px;
	text-align: left;
	color: #fff;
	position: absolute;
	left: -76px;
	text-align: justify;
	text-indent: 2em;
}
.tip-top {
	bottom: 367px;
}
.tip-bottom {
	top: 369px;
}
.his-tip-top {
	width: 470px;
	height: 27px;
	background: url(img/HISSECT-TOP.png);
}
.his-tip-body {
	width: 400px;
	padding: 10px 35px;
	background: url(img/HISSECT-BODY.png);
}
.his-tip-body .img-box {
	width: 100%;
	height: 0;
	overflow: hidden;
	margin: 0 auto 10px;
	text-align: center;
	text-indent: 0;
}
.his-tip-body .img-box img {
	width: 100%;
}
.his-tip-foot {
	width: 470px;
	height: 18px;
	background: url(img/HISSECT-BOTTOM.png);
}
</style>
</head>

<body>
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="echarts" class="echarts">
	<!-- <div class="his-sect">1900
		<div class="his-tip">
			<div class="his-tip-top"></div>
			<div class="his-tip-body">1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。</div>
			<div class="his-tip-foot"></div>
		</div>
	</div>
	<div class="his-sect">1900
		<div class="his-tip">
			<div class="his-tip-top"></div>
			<div class="his-tip-body">1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。</div>
			<div class="his-tip-foot"></div>
		</div>
	</div> -->
	
</div>

<script type="text/javascript">
	
var data = [];
var mockData = [
    {year: 1951, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: ""},
	{year: 1956, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "<null>"},
	{year: 1956, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/3.png"},
	{year: 1958, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/4.png"},
	{year: 1964, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/5.png"},
	{year: 1964, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/6.png"},
	{year: 1966, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/7.png"},
	{year: 1969, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/8.png"},
	{year: 1990, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/1.png"},
	{year: 2002, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/2.png"},
	{year: 2007, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/3.png"},
	{year: 2012, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/4.png"},
	{year: 2013, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/5.png"},
	{year: 2018, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/1.png"},
	{year: 2019, desc: "1951年6月29日，空军工程部将所辖第五厂移交重工业部航空工业局，更名为国营112厂。", imgSrc: "img/2.png"}
];

function devHistory() {
	var str = '';
	for(var i = 0; i < mockData.length; i++) {
		console.log(mockData.length);
		str += '<div class="his-sect">';
		str += mockData[i].year;
		if(i % 2 == 0) {
			str += '<div class="his-tip tip-top">';
		} 
		if(i % 2 == 1){
			str += '<div class="his-tip tip-bottom">';
		}
		str += '<div class="his-tip-top"></div>';
		str += '<div class="his-tip-body">';
		if(mockData[i].imgSrc != "" && mockData[i].imgSrc != "<null>") {
			str += '<div class="img-box"><img src="'+ mockData[i].imgSrc + '" /></div>';
		}
		
		str += mockData[i].desc + '</div>';
		str += '<div class="his-tip-foot"></div>';
		str += '</div>';
		str += '</div>';
		console.log(mockData[i].year, mockData[i].desc, mockData[i].imgSrc)
	}
	$(".echarts").html('');
	$(".echarts").append(str);
}

// $(".echarts").on("click", ".his-tip-body", function(){
// 	var obj = $(this).find(".img-box");
// 	var _height = obj.css("height");
// 	if(_height === "0px") {
// 		$(".img-box").height("0");
// 		obj.height("auto");
// 	} else {
// 		obj.height(0);	
// 	}
// });

$(".echarts").on("click", ".his-tip-body", function(){
	var obj = $(this).find(".img-box");
	var objImg = $(this).find(".img-box img");
	console.log("objImg" ,objImg);
	if(objImg.length != 0) {
		if(obj.height() > 0) { // 如果打开再次点击关闭
			$(".img-box").height("0");
		} else {
			$(".img-box").height("0"); // 收起来
			obj.css("height", "auto"); // 展开
		}
	} else {
		$(".img-box").height("0");
	}
});

window.onload = function(){
	devHistory()
}

</script>
</body>

</html>